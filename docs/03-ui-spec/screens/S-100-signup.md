---
id: S-100
title: サインアップページ
status: implemented
related:
  features: [F-0001]
updated: 2026-01-02
---

# S-100: サインアップページ

## 概要

新規ユーザーがメールアドレス、パスワード、ワークスペース名を入力してアカウントを作成するための画面。

## ページ全体図

```
┌─────────────────────────────────────────────────────────────┐
│                        Header                               │
│                     [Logo] Finsight                         │
└─────────────────────────────────────────────────────────────┘
│                                                             │
│                                                             │
│                                                             │
│                    アカウント作成                            │
│                                                             │
│         ┌─────────────────────────────────────┐            │
│         │                                     │            │
│         │  メールアドレス:                     │            │
│         │  [_________________________]        │            │
│         │                                     │            │
│         │  パスワード:                         │            │
│         │  [_________________________]        │            │
│         │  ※ 8文字以上                        │            │
│         │                                     │            │
│         │  ワークスペース名:                   │            │
│         │  [_________________________]        │            │
│         │                                     │            │
│         │       [ アカウント作成 ]            │            │
│         │                                     │            │
│         │  [エラーメッセージ表示エリア]        │            │
│         │                                     │            │
│         └─────────────────────────────────────┘            │
│                                                             │
│                                                             │
│              既にアカウントをお持ちですか?                   │
│                   [ログインはこちら]                        │
│                                                             │
│                                                             │
│                                                             │
│                                                             │
└─────────────────────────────────────────────────────────────┘
│                        Footer                               │
│              © 2026 Finsight. All rights reserved.          │
└─────────────────────────────────────────────────────────────┘
```

## 主要機能

### 1. サインアップフォーム

**入力フィールド:**

- **メールアドレス**
  - タイプ: `email`
  - 必須: Yes
  - バリデーション: メールアドレス形式
  - プレースホルダー: "user@example.com"
  - エラー例: "有効なメールアドレスを入力してください"

- **パスワード**
  - タイプ: `password`
  - 必須: Yes
  - バリデーション: 最小8文字
  - マスク表示: Yes（入力文字は `●` で表示）
  - ヒント: "8文字以上" とフィールド下に表示
  - エラー例: "パスワードは8文字以上である必要があります"

- **ワークスペース名**
  - タイプ: `text`
  - 必須: Yes
  - バリデーション: 空でないこと
  - プレースホルダー: "My Workspace"
  - 特殊文字・絵文字: 使用可能
  - エラー例: "ワークスペース名を入力してください"

**ボタン:**

- **アカウント作成ボタン**
  - ラベル: "アカウント作成"
  - スタイル: プライマリボタン（目立つデザイン）
  - 状態:
    - デフォルト: クリック可能
    - ローディング中: "作成中..." と表示、スピナーアイコン表示、クリック不可
    - 無効化: すべてのフィールドが入力されるまで無効（オプション）

### 2. バリデーション

**クライアント側バリデーション:**

- フォーム送信前にリアルタイム検証
- 各フィールドのフォーカスアウト時に検証
- エラーは該当フィールドの下に赤字で表示

**検証ルール:**

| フィールド       | 検証ルール                           | エラーメッセージ                           |
| ---------------- | ------------------------------------ | ------------------------------------------ |
| メールアドレス   | 必須 & メール形式                    | "有効なメールアドレスを入力してください"   |
| パスワード       | 必須 & 最小8文字                     | "パスワードは8文字以上である必要があります"|
| ワークスペース名 | 必須 & 空でない                      | "ワークスペース名を入力してください"       |

**サーバー側バリデーション:**

- API からのエラーレスポンスをフォーム上部またはフィールド下に表示
- エラーメッセージ例:
  - "このメールアドレスは既に登録されています"
  - "メールアドレスの形式が正しくありません"
  - "サーバーエラーが発生しました。もう一度お試しください"

### 3. ローディング状態

**サインアップ処理中:**

- アカウント作成ボタンが "作成中..." に変わる
- スピナーアイコンを表示
- フォームフィールドを無効化（再送信を防ぐ）
- ユーザーは送信されたことを視覚的に認識できる

### 4. 成功時の動作

**サインアップ成功:**

1. セッションクッキーが自動的に設定される
2. ユーザーは自動的にログイン状態になる
3. トップページ (`/`) にリダイレクトされる
4. リダイレクト前に成功メッセージを短時間表示（オプション）: "アカウントが作成されました！"

### 5. エラー表示

**エラー表示エリア:**

- フォーム上部またはフィールド下にエラーメッセージを表示
- エラースタイル: 赤背景または赤枠、アイコン付き
- エラーは自動的に消えない（ユーザーが修正するまで表示）

**エラーメッセージ例:**

- **メールアドレス重複**: "このメールアドレスは既に登録されています"
- **無効なメール形式**: "有効なメールアドレスを入力してください"
- **パスワード短すぎ**: "パスワードは8文字以上である必要があります"
- **ワークスペース名空**: "ワークスペース名を入力してください"
- **サーバーエラー**: "エラーが発生しました。もう一度お試しください"

### 6. ログインページへのリンク

**リンク:**

- テキスト: "既にアカウントをお持ちですか? ログインはこちら"
- 遷移先: ログインページ (`/login`, S-110)
- スタイル: テキストリンク（目立たないデザイン）

## 画面遷移

### 遷移元

- **ランディングページ (S-100-landing-page)**: "今すぐ始める" ボタンから
- **ログインページ (S-110)**: "新規登録はこちら" リンクから

### 遷移先

- **ダッシュボード/トップページ**: サインアップ成功時（自動リダイレクト）
- **ログインページ (S-110)**: "ログインはこちら" リンクから

## UI/UX 要件

### レスポンシブデザイン

- **デスクトップ**: フォームを画面中央に配置、最大幅 400px
- **タブレット**: フォームを画面中央に配置、パディング調整
- **モバイル**: フォームを全幅に近い幅で表示、フィールド間のスペース調整

### アクセシビリティ

- すべてのフォームフィールドに `<label>` を関連付ける
- エラーメッセージは `aria-live="polite"` で通知
- キーボード操作でフォーム送信可能（Enter キー）
- フォーカス状態を視覚的に明示

### デザインガイドライン

- フォントサイズ: 最小 14px（モバイル）、16px（デスクトップ）
- フィールド間のスペース: 16px - 24px
- ボタンの高さ: 最小 44px（タップしやすいサイズ）
- カラー:
  - プライマリボタン: ブランドカラー
  - エラーメッセージ: 赤 (#DC2626 など)
  - 成功メッセージ: 緑 (#10B981 など)

## 技術仕様

### フロントエンド技術

- **フレームワーク**: React 19.2.0
- **フォームライブラリ**: TanStack Form v1.0.0
- **ルーティング**: TanStack Router v1.132.0
- **バリデーション**: Zod v4.2.1
- **API通信**: TanStack Query v5.66.5

### API エンドポイント

- **POST /api/auth/signup**
  - リクエスト: `{ email, password, workspaceName }`
  - レスポンス: `{ user, workspace, message }`
  - エラー: `{ error, code, details }`

### セッション管理

- セッションクッキー: `finsight_session`
- HttpOnly, Secure, SameSite=Lax 属性
- 有効期限: 7日間

## テストシナリオ

### 正常系

1. ✅ 有効な情報でサインアップ → トップページにリダイレクト
2. ✅ サインアップ成功後、セッションが設定される
3. ✅ ワークスペース名に特殊文字・絵文字を含めてサインアップ成功

### 異常系

1. ❌ 既に登録されているメールアドレスでサインアップ → エラー表示
2. ❌ 無効なメール形式でサインアップ → エラー表示
3. ❌ パスワード7文字でサインアップ → エラー表示
4. ❌ ワークスペース名空欄でサインアップ → エラー表示
5. ❌ フィールド空欄で送信ボタンクリック → 検証エラー表示

### UI/UX

1. 🎨 ローディング中、ボタンが "作成中..." に変わる
2. 🎨 エラーメッセージがフィールド下に表示される
3. 🎨 モバイルでフォームが適切に表示される
4. ⌨️ キーボードでフォーム操作・送信ができる

## 参考資料

- **機能仕様**: [F-0001: ユーザーサインアップ](../../02-functional-spec/features/F-0001-user-signup.md)
- **API仕様**: [POST /auth/signup](../../05-api-reference/rest/auth/POST-signup.md)
- **ログインページ**: [S-110: ログインページ](./S-110-login.md)
